# 项目架构

## 项目初始化

```bash
npm init vite@latest
```

## ESLint配置

### 基础配置

参照ESLint官方网址

```bash
npm install eslint --save-dev

npx eslint --init
```

增加lint指令

```json
"lint": "eslint ./src/**/*.{js,jsx,vue,ts,tsx} --fix",
```

设置vue3校验

```js
module.exports = {
    env: {
        browser: true,
        es2021: true
    },
    extends: [
        'plugin:vue/vue3-strongly-recommended',
        'standard'
    ],
    parserOptions: {
        ecmaVersion: 'latest',
        parser: '@typescript-eslint/parser',
        sourceType: 'module'
    },
    plugins: [
        'vue',
        '@typescript-eslint'
    ],
    rules: {}
}
```

### 编辑器集成

1. 卸载禁用vetur
2. 安装ESLint和volar

ESLint提供了格式化工具，但是需要手段开启

### commit钩子配置

安装

```bash
npx mrm@2 lint-staged
```

修改设置

```json
 {
  "name": "vite-project",
  "private": true,
  "version": "0.0.0",
  "scripts": {
    "dev": "vite",
    "build": "vue-tsc --noEmit && vite build",
    "lint": "eslint ./src/**/*.{js,jsx,vue,ts,tsx} --fix",
    "preview": "vite preview",
    "prepare": "husky install"
  },
  "dependencies": {
    "vue": "^3.2.25"
  },
  "devDependencies": {
    "@typescript-eslint/eslint-plugin": "^5.14.0",
    "@typescript-eslint/parser": "^5.14.0",
    "@vitejs/plugin-vue": "^2.2.0",
    "eslint": "^7.32.0",
    "eslint-config-standard": "^16.0.3",
    "eslint-plugin-import": "^2.25.4",
    "eslint-plugin-node": "^11.1.0",
    "eslint-plugin-promise": "^5.2.0",
    "eslint-plugin-vue": "^8.5.0",
    "husky": "^7.0.4",
    "lint-staged": "^12.3.5",
    "typescript": "^4.5.4",
    "vite": "^2.8.0",
    "vue-tsc": "^0.29.8"
  },
  "lint-staged": {
    "*.{js,jsx,vue,ts,tsx}": [
      "npm run lint",
      "git add"
    ]
  }
}
 ```

### 开发和构建的时候进行验证

安装

```bash
npm install vite-plugin-eslint --save-dev
```
